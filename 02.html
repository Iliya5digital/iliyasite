<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>iliyasite new document title</title>
</head>
<body>
<p>from QuikPy import QuikPy  # &#1056;&#1072;&#1073;&#1086;&#1090;&#1072; &#1089; QUIK &#1080;&#1079; Python &#1095;&#1077;&#1088;&#1077;&#1079; LUA &#1089;&#1082;&#1088;&#1080;&#1087;&#1090;&#1099; QuikSharp</p>
<div></div>
<div></div>
<div>def GetAllAccounts():</div>
<div>&nbsp; &nbsp; """&#1055;&#1086;&#1083;&#1091;&#1095;&#1077;&#1085;&#1080;&#1077; &#1074;&#1089;&#1077;&#1093; &#1090;&#1086;&#1088;&#1075;&#1086;&#1074;&#1099;&#1093; &#1089;&#1095;&#1077;&#1090;&#1086;&#1074;"""</div>
<div>&nbsp; &nbsp; futuresFirmId = 'SPBFUT'  # &#1060;&#1080;&#1088;&#1084;&#1072; &#1076;&#1083;&#1103; &#1092;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1086;&#1074;. &#1048;&#1079;&#1084;&#1077;&#1085;&#1080;&#1090;&#1077;, &#1077;&#1089;&#1083;&#1080; &#1090;&#1088;&#1077;&#1073;&#1091;&#1077;&#1090;&#1089;&#1103;, &#1085;&#1072; &#1092;&#1080;&#1088;&#1084;&#1091;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1091;&#1102; &#1076;&#1083;&#1103; &#1092;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1086;&#1074; &#1087;&#1086;&#1089;&#1090;&#1072;&#1074;&#1080;&#1083; &#1074;&#1072;&#1096; &#1073;&#1088;&#1086;&#1082;&#1077;&#1088;</div>
<div></div>
<div>&nbsp; &nbsp; classCodes = qpProvider.GetClassesList()['data']  # &#1057;&#1087;&#1080;&#1089;&#1086;&#1082; &#1082;&#1083;&#1072;&#1089;&#1089;&#1086;&#1074;</div>
<div>&nbsp; &nbsp; classCodesList = classCodes[:-1].split(',')  # &#1059;&#1076;&#1072;&#1083;&#1103;&#1077;&#1084; &#1087;&#1086;&#1089;&#1083;&#1077;&#1076;&#1085;&#1102;&#1102; &#1079;&#1072;&#1087;&#1103;&#1090;&#1091;&#1102;, &#1088;&#1072;&#1079;&#1073;&#1080;&#1074;&#1072;&#1077;&#1084; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103; &#1087;&#1086; &#1079;&#1072;&#1087;&#1103;&#1090;&#1086;&#1081;</div>
<div>&nbsp; &nbsp; tradeAccounts = qpProvider.GetTradeAccounts()['data']  # &#1042;&#1089;&#1077; &#1090;&#1086;&#1088;&#1075;&#1086;&#1074;&#1099;&#1077; &#1089;&#1095;&#1077;&#1090;&#1072;</div>
<div>&nbsp; &nbsp; moneyLimits = qpProvider.GetMoneyLimits()['data']  # &#1042;&#1089;&#1077; &#1076;&#1077;&#1085;&#1077;&#1078;&#1085;&#1099;&#1077; &#1083;&#1080;&#1084;&#1080;&#1090;&#1099; (&#1086;&#1089;&#1090;&#1072;&#1090;&#1082;&#1080; &#1085;&#1072; &#1089;&#1095;&#1077;&#1090;&#1072;&#1093;)</div>
<div>&nbsp; &nbsp; depoLimits = qpProvider.GetAllDepoLimits()['data']  # &#1042;&#1089;&#1077; &#1083;&#1080;&#1084;&#1080;&#1090;&#1099; &#1087;&#1086; &#1073;&#1091;&#1084;&#1072;&#1075;&#1072;&#1084; (&#1087;&#1086;&#1079;&#1080;&#1094;&#1080;&#1080; &#1087;&#1086; &#1080;&#1085;&#1089;&#1090;&#1088;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1084;)</div>
<div>&nbsp; &nbsp; orders = qpProvider.GetAllOrders()['data']  # &#1042;&#1089;&#1077; &#1079;&#1072;&#1103;&#1074;&#1082;&#1080;</div>
<div>&nbsp; &nbsp; stopOrders = qpProvider.GetAllStopOrders()['data']  # &#1042;&#1089;&#1077; &#1089;&#1090;&#1086;&#1087; &#1079;&#1072;&#1103;&#1074;&#1082;&#1080;</div>
<div></div>
<div>&nbsp; &nbsp; # &#1050;&#1086;&#1076;&#1099; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072; / &#1060;&#1080;&#1088;&#1084;&#1099; / &#1057;&#1095;&#1077;&#1090;&#1072;</div>
<div>&nbsp; &nbsp; for tradeAccount in tradeAccounts:  # &#1055;&#1088;&#1086;&#1073;&#1077;&#1075;&#1072;&#1077;&#1084;&#1089;&#1103; &#1087;&#1086; &#1074;&#1089;&#1077;&#1084; &#1089;&#1095;&#1077;&#1090;&#1072;&#1084;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; firmId = tradeAccount['firmid']  # &#1060;&#1080;&#1088;&#1084;&#1072;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; tradeAccountId = tradeAccount['trdaccid']  # &#1057;&#1095;&#1077;&#1090;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; distinctClientCode = list(set([moneyLimit['client_code'] for moneyLimit in moneyLimits if moneyLimit['firmid'] == firmId]))  # &#1059;&#1085;&#1080;&#1082;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1082;&#1086;&#1076;&#1099; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072; &#1087;&#1086; &#1092;&#1080;&#1088;&#1084;&#1077;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; print(f'&#1050;&#1086;&#1076; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072; {distinctClientCode[0] if distinctClientCode else "&#1085;&#1077; &#1079;&#1072;&#1076;&#1072;&#1085;"}, &#1060;&#1080;&#1088;&#1084;&#1072; {firmId}, &#1057;&#1095;&#1077;&#1090; {tradeAccountId} ({tradeAccount["description"]})')</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; tradeAccountClassCodes = tradeAccount['class_codes'][1:-1].split('|')  # &#1050;&#1083;&#1072;&#1089;&#1089;&#1099; &#1090;&#1086;&#1088;&#1075;&#1086;&#1074;&#1086;&#1075;&#1086; &#1089;&#1095;&#1077;&#1090;&#1072;. &#1059;&#1076;&#1072;&#1083;&#1103;&#1077;&#1084; &#1087;&#1086;&#1089;&#1083;&#1077;&#1076;&#1085;&#1102;&#1102; &#1074;&#1077;&#1088;&#1090;&#1080;&#1082;&#1072;&#1083;&#1100;&#1085;&#1091;&#1102; &#1095;&#1077;&#1088;&#1090;&#1091;, &#1088;&#1072;&#1079;&#1073;&#1080;&#1074;&#1072;&#1077;&#1084; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103; &#1087;&#1086; &#1074;&#1077;&#1088;&#1090;&#1080;&#1082;&#1072;&#1083;&#1100;&#1085;&#1086;&#1081; &#1095;&#1077;&#1088;&#1090;&#1077;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; intersectionClassCodes = list(set(tradeAccountClassCodes).intersection(classCodesList))  # &#1050;&#1083;&#1072;&#1089;&#1089;&#1099;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1077; &#1077;&#1089;&#1090;&#1100; &#1080; &#1074; &#1089;&#1087;&#1080;&#1089;&#1082;&#1077; &#1080; &#1074; &#1090;&#1086;&#1088;&#1075;&#1086;&#1074;&#1086;&#1084; &#1089;&#1095;&#1077;&#1090;&#1077;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; # &#1050;&#1083;&#1072;&#1089;&#1089;&#1099;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; for classCode in intersectionClassCodes:  # &#1055;&#1088;&#1086;&#1073;&#1077;&#1075;&#1072;&#1077;&#1084;&#1089;&#1103; &#1087;&#1086; &#1074;&#1089;&#1077;&#1084; &#1086;&#1073;&#1097;&#1080;&#1084; &#1082;&#1083;&#1072;&#1089;&#1089;&#1072;&#1084;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; classInfo = qpProvider.GetClassInfo(classCode)['data']  # &#1048;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1103; &#1086; &#1082;&#1083;&#1072;&#1089;&#1089;&#1077;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(f'- &#1050;&#1083;&#1072;&#1089;&#1089; {classCode} ({classInfo["name"]}), &#1058;&#1080;&#1082;&#1077;&#1088;&#1086;&#1074; {classInfo["nsecs"]}')</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &#1048;&#1085;&#1089;&#1090;&#1088;&#1091;&#1084;&#1077;&#1085;&#1090;&#1099;. &#1045;&#1089;&#1083;&#1080; &#1074;&#1099;&#1074;&#1086;&#1076;&#1080;&#1090;&#1100; &#1085;&#1072; &#1101;&#1082;&#1088;&#1072;&#1085;, &#1090;&#1086; &#1079;&#1072;&#1085;&#1080;&#1084;&#1072;&#1102;&#1090; &#1084;&#1085;&#1086;&#1075;&#1086; &#1084;&#1077;&#1089;&#1090;&#1072;. &#1055;&#1086;&#1101;&#1090;&#1086;&#1084;&#1091;, &#1079;&#1072;&#1082;&#1086;&#1084;&#1084;&#1077;&#1085;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1083;&#1080;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # classSecurities = qpProvider.GetClassSecurities(classCode)['data'][:-1].split(',')  # &#1057;&#1087;&#1080;&#1089;&#1086;&#1082; &#1080;&#1085;&#1089;&#1090;&#1088;&#1091;&#1084;&#1077;&#1085;&#1090;&#1086;&#1074; &#1082;&#1083;&#1072;&#1089;&#1089;&#1072;. &#1059;&#1076;&#1072;&#1083;&#1103;&#1077;&#1084; &#1087;&#1086;&#1089;&#1083;&#1077;&#1076;&#1085;&#1102;&#1102; &#1079;&#1072;&#1087;&#1103;&#1090;&#1091;&#1102;, &#1088;&#1072;&#1079;&#1073;&#1080;&#1074;&#1072;&#1077;&#1084; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103; &#1087;&#1086; &#1079;&#1072;&#1087;&#1103;&#1090;&#1086;&#1081;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # print(f'  - &#1058;&#1080;&#1082;&#1077;&#1088;&#1099; ({classSecurities})')</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; if firmId == futuresFirmId:  # &#1044;&#1083;&#1103; &#1092;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1086;&#1074; &#1089;&#1074;&#1086;&#1080; &#1088;&#1072;&#1089;&#1095;&#1077;&#1090;&#1099;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &#1051;&#1080;&#1084;&#1080;&#1090;&#1099;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(f'- &#1060;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1085;&#1099;&#1081; &#1083;&#1080;&#1084;&#1080;&#1090; {qpProvider.GetFuturesLimit(firmId, tradeAccountId, 0, "SUR")["data"]["cbplimit"]} SUR')</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &#1055;&#1086;&#1079;&#1080;&#1094;&#1080;&#1080;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; futuresHoldings = qpProvider.GetFuturesHoldings()['data']  # &#1042;&#1089;&#1077; &#1092;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1085;&#1099;&#1077; &#1087;&#1086;&#1079;&#1080;&#1094;&#1080;&#1080;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; activeFuturesHoldings = [futuresHolding for futuresHolding in futuresHoldings if futuresHolding['totalnet'] != 0]  # &#1040;&#1082;&#1090;&#1080;&#1074;&#1085;&#1099;&#1077; &#1092;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1085;&#1099;&#1077; &#1087;&#1086;&#1079;&#1080;&#1094;&#1080;&#1080;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for activeFuturesHolding in activeFuturesHoldings:</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(f'  - &#1060;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1085;&#1072;&#1103; &#1087;&#1086;&#1079;&#1080;&#1094;&#1080;&#1103; {activeFuturesHolding["sec_code"]} {activeFuturesHolding["totalnet"]} @ {activeFuturesHolding["cbplused"]}')</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; else:  # &#1044;&#1083;&#1103; &#1086;&#1089;&#1090;&#1072;&#1083;&#1100;&#1085;&#1099;&#1093; &#1092;&#1080;&#1088;&#1084;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &#1051;&#1080;&#1084;&#1080;&#1090;&#1099;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; firmMoneyLimits = [moneyLimit for moneyLimit in moneyLimits if moneyLimit['firmid'] == firmId]  # &#1044;&#1077;&#1085;&#1077;&#1078;&#1085;&#1099;&#1077; &#1083;&#1080;&#1084;&#1080;&#1090;&#1099; &#1087;&#1086; &#1092;&#1080;&#1088;&#1084;&#1077;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for firmMoneyLimit in firmMoneyLimits:  # &#1055;&#1088;&#1086;&#1073;&#1077;&#1075;&#1072;&#1077;&#1084;&#1089;&#1103; &#1087;&#1086; &#1074;&#1089;&#1077;&#1084; &#1076;&#1077;&#1085;&#1077;&#1078;&#1085;&#1099;&#1084; &#1083;&#1080;&#1084;&#1080;&#1090;&#1072;&#1084;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; limitKind = firmMoneyLimit['limit_kind']  # &#1044;&#1077;&#1085;&#1100; &#1083;&#1080;&#1084;&#1080;&#1090;&#1072;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(f'- &#1044;&#1077;&#1085;&#1077;&#1078;&#1085;&#1099;&#1081; &#1083;&#1080;&#1084;&#1080;&#1090; {firmMoneyLimit["tag"]} &#1085;&#1072; T{limitKind}: {firmMoneyLimit["currentbal"]} {firmMoneyLimit["currcode"]}')</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &#1055;&#1086;&#1079;&#1080;&#1094;&#1080;&#1080;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; firmKindDepoLimits = [depoLimit for depoLimit in depoLimits if depoLimit['firmid'] == firmId and depoLimit['limit_kind'] == limitKind and depoLimit['currentbal'] != 0]  # &#1041;&#1077;&#1088;&#1077;&#1084; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1086;&#1090;&#1082;&#1088;&#1099;&#1090;&#1099;&#1077; &#1087;&#1086;&#1079;&#1080;&#1094;&#1080;&#1080; &#1087;&#1086; &#1092;&#1080;&#1088;&#1084;&#1077; &#1080; &#1076;&#1085;&#1102;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for firmKindDepoLimit in firmKindDepoLimits:  # &#1055;&#1088;&#1086;&#1073;&#1077;&#1075;&#1072;&#1077;&#1084;&#1089;&#1103; &#1087;&#1086; &#1074;&#1089;&#1077;&#1084; &#1087;&#1086;&#1079;&#1080;&#1094;&#1080;&#1103;&#1084;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; secCode = firmKindDepoLimit["sec_code"]  # &#1050;&#1086;&#1076; &#1090;&#1080;&#1082;&#1077;&#1088;&#1072;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; classCode = qpProvider.GetSecurityClass(classCodes, secCode)['data']</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; entryPrice = float(firmKindDepoLimit["wa_position_price"])</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lastPrice = float(qpProvider.GetParamEx(classCode, secCode, 'LAST')['data']['param_value'])  # &#1055;&#1086;&#1089;&#1083;&#1077;&#1076;&#1085;&#1103;&#1103; &#1094;&#1077;&#1085;&#1072; &#1089;&#1076;&#1077;&#1083;&#1082;&#1080;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if classCode == 'TQOB':  # &#1044;&#1083;&#1103; &#1088;&#1099;&#1085;&#1082;&#1072; &#1086;&#1073;&#1083;&#1080;&#1075;&#1072;&#1094;&#1080;&#1081;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lastPrice *= 10  # &#1059;&#1084;&#1085;&#1086;&#1078;&#1072;&#1077;&#1084; &#1085;&#1072; 10</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(f'  - &#1055;&#1086;&#1079;&#1080;&#1094;&#1080;&#1103; {classCode}.{secCode} {firmKindDepoLimit["currentbal"]} @ {entryPrice:.2f}/{lastPrice:.2f}')</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; # &#1047;&#1072;&#1103;&#1074;&#1082;&#1080;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; firmOrders = [order for order in orders if order['firmid'] == firmId and order['flags'] &amp; 0b1 == 0b1]  # &#1040;&#1082;&#1090;&#1080;&#1074;&#1085;&#1099;&#1077; &#1079;&#1072;&#1103;&#1074;&#1082;&#1080; &#1087;&#1086; &#1092;&#1080;&#1088;&#1084;&#1077;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; for firmOrder in firmOrders:  # &#1055;&#1088;&#1086;&#1073;&#1077;&#1075;&#1072;&#1077;&#1084;&#1089;&#1103; &#1087;&#1086; &#1074;&#1089;&#1077;&#1084; &#1079;&#1072;&#1103;&#1074;&#1082;&#1072;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isBuy = firmOrder['flags'] &amp; 0b100 != 0b100  # &#1047;&#1072;&#1103;&#1074;&#1082;&#1072; &#1085;&#1072; &#1087;&#1086;&#1082;&#1091;&#1087;&#1082;&#1091;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(f'- &#1047;&#1072;&#1103;&#1074;&#1082;&#1072; &#1085;&#1086;&#1084;&#1077;&#1088; {firmOrder["order_num"]} {"&#1055;&#1086;&#1082;&#1091;&#1087;&#1082;&#1072;" if isBuy else "&#1055;&#1088;&#1086;&#1076;&#1072;&#1078;&#1072;"} {firmOrder["class_code"]}.{firmOrder["sec_code"]} {firmOrder["qty"]} @ {firmOrder["price"]}')</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; # &#1057;&#1090;&#1086;&#1087; &#1079;&#1072;&#1103;&#1074;&#1082;&#1080;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; firmStopOrders = [stopOrder for stopOrder in stopOrders if stopOrder['firmid'] == firmId and stopOrder['flags'] &amp; 0b1 == 0b1]  # &#1040;&#1082;&#1090;&#1080;&#1074;&#1085;&#1099;&#1077; &#1089;&#1090;&#1086;&#1087; &#1079;&#1072;&#1103;&#1074;&#1082;&#1080; &#1087;&#1086; &#1092;&#1080;&#1088;&#1084;&#1077;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; for firmStopOrder in firmStopOrders:  # &#1055;&#1088;&#1086;&#1073;&#1077;&#1075;&#1072;&#1077;&#1084;&#1089;&#1103; &#1087;&#1086; &#1074;&#1089;&#1077;&#1084; &#1089;&#1090;&#1086;&#1087; &#1079;&#1072;&#1103;&#1074;&#1082;&#1072;&#1084;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isBuy = firmStopOrder['flags'] &amp; 0b100 != 0b100  # &#1047;&#1072;&#1103;&#1074;&#1082;&#1072; &#1085;&#1072; &#1087;&#1086;&#1082;&#1091;&#1087;&#1082;&#1091;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(f'- &#1057;&#1090;&#1086;&#1087; &#1079;&#1072;&#1103;&#1074;&#1082;&#1072; &#1085;&#1086;&#1084;&#1077;&#1088; {firmStopOrder["order_num"]} {"&#1055;&#1086;&#1082;&#1091;&#1087;&#1082;&#1072;" if isBuy else "&#1055;&#1088;&#1086;&#1076;&#1072;&#1078;&#1072;"} {firmStopOrder["class_code"]}.{firmStopOrder["sec_code"]} {firmStopOrder["qty"]} @ {firmStopOrder["price"]}')</div>
<div></div>
<div>def GetAccount(ClientCode='', FirmId='SPBFUT', TradeAccountId='SPBFUT00PST', LimitKind=0, CurrencyCode='SUR', IsFutures=True):</div>
<div>&nbsp; &nbsp; """&#1055;&#1086;&#1083;&#1091;&#1095;&#1077;&#1085;&#1080;&#1077; &#1090;&#1086;&#1088;&#1075;&#1086;&#1074;&#1086;&#1075;&#1086; &#1089;&#1095;&#1077;&#1090;&#1072;. &#1055;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;, &#1074;&#1099;&#1076;&#1072;&#1077;&#1090;&#1089;&#1103; &#1089;&#1095;&#1077;&#1090; &#1089;&#1088;&#1086;&#1095;&#1085;&#1086;&#1075;&#1086; &#1088;&#1099;&#1085;&#1082;&#1072;"""</div>
<div>&nbsp; &nbsp; classCodes = qpProvider.GetClassesList()['data']  # &#1057;&#1087;&#1080;&#1089;&#1086;&#1082; &#1082;&#1083;&#1072;&#1089;&#1089;&#1086;&#1074;</div>
<div>&nbsp; &nbsp; moneyLimits = qpProvider.GetMoneyLimits()['data']  # &#1042;&#1089;&#1077; &#1076;&#1077;&#1085;&#1077;&#1078;&#1085;&#1099;&#1077; &#1083;&#1080;&#1084;&#1080;&#1090;&#1099; (&#1086;&#1089;&#1090;&#1072;&#1090;&#1082;&#1080; &#1085;&#1072; &#1089;&#1095;&#1077;&#1090;&#1072;&#1093;)</div>
<div>&nbsp; &nbsp; depoLimits = qpProvider.GetAllDepoLimits()['data']  # &#1042;&#1089;&#1077; &#1083;&#1080;&#1084;&#1080;&#1090;&#1099; &#1087;&#1086; &#1073;&#1091;&#1084;&#1072;&#1075;&#1072;&#1084; (&#1087;&#1086;&#1079;&#1080;&#1094;&#1080;&#1080; &#1087;&#1086; &#1080;&#1085;&#1089;&#1090;&#1088;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1084;)</div>
<div>&nbsp; &nbsp; orders = qpProvider.GetAllOrders()['data']  # &#1042;&#1089;&#1077; &#1079;&#1072;&#1103;&#1074;&#1082;&#1080;</div>
<div>&nbsp; &nbsp; stopOrders = qpProvider.GetAllStopOrders()['data']  # &#1042;&#1089;&#1077; &#1089;&#1090;&#1086;&#1087; &#1079;&#1072;&#1103;&#1074;&#1082;&#1080;</div>
<div></div>
<div>&nbsp; &nbsp; print(f'&#1050;&#1086;&#1076; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072; {ClientCode}, &#1060;&#1080;&#1088;&#1084;&#1072; {FirmId}, &#1057;&#1095;&#1077;&#1090; {TradeAccountId}, T{LimitKind}, {CurrencyCode}')</div>
<div>&nbsp; &nbsp; if IsFutures:  # &#1044;&#1083;&#1103; &#1092;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1086;&#1074; &#1089;&#1074;&#1086;&#1080; &#1088;&#1072;&#1089;&#1095;&#1077;&#1090;&#1099;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; print(f'- &#1060;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1085;&#1099;&#1081; &#1083;&#1080;&#1084;&#1080;&#1090; {qpProvider.GetFuturesLimit(FirmId, TradeAccountId, 0, "SUR")["data"]["cbplimit"]} SUR')</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; futuresHoldings = qpProvider.GetFuturesHoldings()['data']  # &#1042;&#1089;&#1077; &#1092;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1085;&#1099;&#1077; &#1087;&#1086;&#1079;&#1080;&#1094;&#1080;&#1080;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; activeFuturesHoldings = [futuresHolding for futuresHolding in futuresHoldings if futuresHolding['totalnet'] != 0]  # &#1040;&#1082;&#1090;&#1080;&#1074;&#1085;&#1099;&#1077; &#1092;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1085;&#1099;&#1077; &#1087;&#1086;&#1079;&#1080;&#1094;&#1080;&#1080;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; for activeFuturesHolding in activeFuturesHoldings:</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(f'- &#1060;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1085;&#1072;&#1103; &#1087;&#1086;&#1079;&#1080;&#1094;&#1080;&#1103; {activeFuturesHolding["sec_code"]} {activeFuturesHolding["totalnet"]} @ {activeFuturesHolding["cbplused"]}')</div>
<div>&nbsp; &nbsp; else:  # &#1044;&#1083;&#1103; &#1086;&#1089;&#1090;&#1072;&#1083;&#1100;&#1085;&#1099;&#1093; &#1092;&#1080;&#1088;&#1084;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; accountMoneyLimit = [moneyLimit for moneyLimit in moneyLimits  # &#1044;&#1077;&#1085;&#1077;&#1078;&#1085;&#1099;&#1081; &#1083;&#1080;&#1084;&#1080;&#1090;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if moneyLimit['client_code'] == ClientCode and  # &#1042;&#1099;&#1073;&#1080;&#1088;&#1072;&#1077;&#1084; &#1087;&#1086; &#1082;&#1086;&#1076;&#1091; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;moneyLimit['firmid'] == FirmId and  # &#1060;&#1080;&#1088;&#1084;&#1077;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;moneyLimit['limit_kind'] == LimitKind and  # &#1044;&#1085;&#1102; &#1083;&#1080;&#1084;&#1080;&#1090;&#1072;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;moneyLimit["currcode"] == CurrencyCode][0]  # &#1042;&#1072;&#1083;&#1102;&#1090;&#1077;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; print(f'- &#1044;&#1077;&#1085;&#1077;&#1078;&#1085;&#1099;&#1081; &#1083;&#1080;&#1084;&#1080;&#1090; {accountMoneyLimit["currentbal"]}')</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; accountDepoLimits = [depoLimit for depoLimit in depoLimits  # &#1041;&#1091;&#1084;&#1072;&#1078;&#1085;&#1099;&#1081; &#1083;&#1080;&#1084;&#1080;&#1090;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if depoLimit['client_code'] == ClientCode and  # &#1042;&#1099;&#1073;&#1080;&#1088;&#1072;&#1077;&#1084; &#1087;&#1086; &#1082;&#1086;&#1076;&#1091; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;depoLimit['firmid'] == FirmId and  # &#1060;&#1080;&#1088;&#1084;&#1077;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;depoLimit['limit_kind'] == LimitKind and  # &#1044;&#1085;&#1102; &#1083;&#1080;&#1084;&#1080;&#1090;&#1072;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;depoLimit['currentbal'] != 0]  # &#1041;&#1077;&#1088;&#1077;&#1084; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1086;&#1090;&#1082;&#1088;&#1099;&#1090;&#1099;&#1077; &#1087;&#1086;&#1079;&#1080;&#1094;&#1080;&#1080; &#1087;&#1086; &#1092;&#1080;&#1088;&#1084;&#1077; &#1080; &#1076;&#1085;&#1102;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; for firmKindDepoLimit in accountDepoLimits:  # &#1055;&#1088;&#1086;&#1073;&#1077;&#1075;&#1072;&#1077;&#1084;&#1089;&#1103; &#1087;&#1086; &#1074;&#1089;&#1077;&#1084; &#1087;&#1086;&#1079;&#1080;&#1094;&#1080;&#1103;&#1084;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; secCode = firmKindDepoLimit["sec_code"]  # &#1050;&#1086;&#1076; &#1090;&#1080;&#1082;&#1077;&#1088;&#1072;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; entryPrice = float(firmKindDepoLimit["wa_position_price"])</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; classCode = qpProvider.GetSecurityClass(classCodes, secCode)['data']</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lastPrice = float(qpProvider.GetParamEx(classCode, secCode, 'LAST')['data']['param_value'])  # &#1055;&#1086;&#1089;&#1083;&#1077;&#1076;&#1085;&#1103;&#1103; &#1094;&#1077;&#1085;&#1072; &#1089;&#1076;&#1077;&#1083;&#1082;&#1080;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if classCode == 'TQOB':  # &#1044;&#1083;&#1103; &#1088;&#1099;&#1085;&#1082;&#1072; &#1086;&#1073;&#1083;&#1080;&#1075;&#1072;&#1094;&#1080;&#1081;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lastPrice *= 10  # &#1059;&#1084;&#1085;&#1086;&#1078;&#1072;&#1077;&#1084; &#1085;&#1072; 10</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(f'- &#1055;&#1086;&#1079;&#1080;&#1094;&#1080;&#1103; {classCode}.{secCode} {firmKindDepoLimit["currentbal"]} @ {entryPrice:.2f}/{lastPrice:.2f}')</div>
<div>&nbsp; &nbsp; accountOrders = [order for order in orders  # &#1047;&#1072;&#1103;&#1074;&#1082;&#1080;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (order['client_code'] == ClientCode or ClientCode == '') and  # &#1042;&#1099;&#1073;&#1080;&#1088;&#1072;&#1077;&#1084; &#1087;&#1086; &#1082;&#1086;&#1076;&#1091; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;order['firmid'] == FirmId and  # &#1060;&#1080;&#1088;&#1084;&#1077;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;order['account'] == TradeAccountId and  # &#1057;&#1095;&#1077;&#1090;&#1091;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;order['flags'] &amp; 0b1 == 0b1]  # &#1040;&#1082;&#1090;&#1080;&#1074;&#1085;&#1099;&#1077; &#1079;&#1072;&#1103;&#1074;&#1082;&#1080;</div>
<div>&nbsp; &nbsp; for accountOrder in accountOrders:  # &#1055;&#1088;&#1086;&#1073;&#1077;&#1075;&#1072;&#1077;&#1084;&#1089;&#1103; &#1087;&#1086; &#1074;&#1089;&#1077;&#1084; &#1079;&#1072;&#1103;&#1074;&#1082;&#1072;&#1084;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; isBuy = accountOrder['flags'] &amp; 0b100 != 0b100  # &#1047;&#1072;&#1103;&#1074;&#1082;&#1072; &#1085;&#1072; &#1087;&#1086;&#1082;&#1091;&#1087;&#1082;&#1091;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; print(f'- &#1047;&#1072;&#1103;&#1074;&#1082;&#1072; &#1085;&#1086;&#1084;&#1077;&#1088; {accountOrder["order_num"]} {"&#1055;&#1086;&#1082;&#1091;&#1087;&#1082;&#1072;" if isBuy else "&#1055;&#1088;&#1086;&#1076;&#1072;&#1078;&#1072;"} {accountOrder["class_code"]}.{accountOrder["sec_code"]} {accountOrder["qty"]} @ {accountOrder["price"]}')</div>
<div>&nbsp; &nbsp; accountStopOrders = [stopOrder for stopOrder in stopOrders  # &#1057;&#1090;&#1086;&#1087; &#1079;&#1072;&#1103;&#1074;&#1082;&#1080;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (stopOrder['client_code'] == ClientCode or ClientCode == '') and  # &#1042;&#1099;&#1073;&#1080;&#1088;&#1072;&#1077;&#1084; &#1087;&#1086; &#1082;&#1086;&#1076;&#1091; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stopOrder['firmid'] == FirmId and  # &#1060;&#1080;&#1088;&#1084;&#1077;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stopOrder['account'] == TradeAccountId and  # &#1057;&#1095;&#1077;&#1090;&#1091;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stopOrder['flags'] &amp; 0b1 == 0b1]  # &#1040;&#1082;&#1090;&#1080;&#1074;&#1085;&#1099;&#1077; &#1089;&#1090;&#1086;&#1087; &#1079;&#1072;&#1103;&#1074;&#1082;&#1080;</div>
<div>&nbsp; &nbsp; for accountStopOrder in accountStopOrders:  # &#1055;&#1088;&#1086;&#1073;&#1077;&#1075;&#1072;&#1077;&#1084;&#1089;&#1103; &#1087;&#1086; &#1074;&#1089;&#1077;&#1084; &#1089;&#1090;&#1086;&#1087; &#1079;&#1072;&#1103;&#1074;&#1082;&#1072;&#1084;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; isBuy = accountStopOrder['flags'] &amp; 0b100 != 0b100  # &#1047;&#1072;&#1103;&#1074;&#1082;&#1072; &#1085;&#1072; &#1087;&#1086;&#1082;&#1091;&#1087;&#1082;&#1091;</div>
<div>&nbsp; &nbsp; &nbsp; &nbsp; print(f'- &#1057;&#1090;&#1086;&#1087; &#1079;&#1072;&#1103;&#1074;&#1082;&#1072; &#1085;&#1086;&#1084;&#1077;&#1088; {accountStopOrder["order_num"]} {"&#1055;&#1086;&#1082;&#1091;&#1087;&#1082;&#1072;" if isBuy else "&#1055;&#1088;&#1086;&#1076;&#1072;&#1078;&#1072;"} {accountStopOrder["class_code"]}.{accountStopOrder["sec_code"]} {accountStopOrder["qty"]} @ {accountStopOrder["price"]}')</div>
<div></div>
<div></div>
<div>if __name__ == '__main__':  # &#1058;&#1086;&#1095;&#1082;&#1072; &#1074;&#1093;&#1086;&#1076;&#1072; &#1087;&#1088;&#1080; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1077; &#1101;&#1090;&#1086;&#1075;&#1086; &#1089;&#1082;&#1088;&#1080;&#1087;&#1090;&#1072;</div>
<div>&nbsp; &nbsp; qpProvider = QuikPy()  # &#1042;&#1099;&#1079;&#1099;&#1074;&#1072;&#1077;&#1084; &#1082;&#1086;&#1085;&#1089;&#1090;&#1088;&#1091;&#1082;&#1090;&#1086;&#1088; QuikPy &#1089; &#1087;&#1086;&#1076;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1080;&#1077;&#1084; &#1082; &#1083;&#1086;&#1082;&#1072;&#1083;&#1100;&#1085;&#1086;&#1084;&#1091; &#1082;&#1086;&#1084;&#1087;&#1100;&#1102;&#1090;&#1077;&#1088;&#1091; &#1089; QUIK</div>
<div>&nbsp; &nbsp; # qpProvider = QuikPy(Host='&lt;&#1042;&#1072;&#1096; IP &#1072;&#1076;&#1088;&#1077;&#1089;&gt;')  # &#1042;&#1099;&#1079;&#1099;&#1074;&#1072;&#1077;&#1084; &#1082;&#1086;&#1085;&#1089;&#1090;&#1088;&#1091;&#1082;&#1090;&#1086;&#1088; QuikPy &#1089; &#1087;&#1086;&#1076;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1080;&#1077;&#1084; &#1082; &#1091;&#1076;&#1072;&#1083;&#1077;&#1085;&#1085;&#1086;&#1084;&#1091; &#1082;&#1086;&#1084;&#1087;&#1100;&#1102;&#1090;&#1077;&#1088;&#1091; &#1089; QUIK</div>
<div></div>
<div>&nbsp; &nbsp; GetAllAccounts()  # &#1055;&#1086;&#1083;&#1091;&#1095;&#1072;&#1077;&#1084; &#1074;&#1089;&#1077; &#1089;&#1095;&#1077;&#1090;&#1072;. &#1055;&#1086; &#1085;&#1080;&#1084; &#1084;&#1086;&#1078;&#1085;&#1086; &#1073;&#1091;&#1076;&#1077;&#1090; &#1089;&#1092;&#1086;&#1088;&#1084;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100; &#1089;&#1087;&#1080;&#1089;&#1086;&#1082; &#1089;&#1095;&#1077;&#1090;&#1086;&#1074; &#1076;&#1083;&#1103; &#1090;&#1086;&#1088;&#1075;&#1086;&#1074;&#1083;&#1080;</div>
<div>&nbsp; &nbsp; print()</div>
<div>&nbsp; &nbsp; GetAccount()  # &#1056;&#1086;&#1089;&#1089;&#1080;&#1081;&#1089;&#1082;&#1080;&#1077; &#1092;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1099; &#1080; &#1086;&#1087;&#1094;&#1080;&#1086;&#1085;&#1099; (&#1089;&#1095;&#1077;&#1090; &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;)</div>
<div>&nbsp; &nbsp; # &#1055;&#1086; &#1089;&#1087;&#1080;&#1089;&#1082;&#1091; &#1087;&#1086;&#1083;&#1091;&#1095;&#1077;&#1085;&#1085;&#1099;&#1093; &#1089;&#1095;&#1077;&#1090;&#1086;&#1074; &#1086;&#1073;&#1103;&#1079;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1100;&#1090;&#1077; &#1082;&#1072;&#1078;&#1076;&#1099;&#1081;!</div>
<div>&nbsp; &nbsp; # GetAccount('&lt;&#1050;&#1086;&#1076; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072;&gt;', '&lt;&#1050;&#1086;&#1076; &#1092;&#1080;&#1088;&#1084;&#1099;&gt;', '&lt;&#1057;&#1095;&#1077;&#1090;&gt;', &lt;&#1053;&#1086;&#1084;&#1077;&#1088; &#1076;&#1085;&#1103; &#1083;&#1080;&#1084;&#1080;&#1090;&#1072;&gt;, '&lt;&#1042;&#1072;&#1083;&#1102;&#1090;&#1072;&gt;', &lt;&#1057;&#1095;&#1077;&#1090; &#1092;&#1100;&#1102;&#1095;&#1077;&#1088;&#1089;&#1086;&#1074;=True, &#1080;&#1085;&#1072;&#1095;&#1077;=False&gt;)</div>
<div></div>
<div></div>
<div>&nbsp; &nbsp; # &#1042;&#1099;&#1093;&#1086;&#1076;</div>
<div>&nbsp; &nbsp; qpProvider.CloseConnectionAndThread()  # &#1055;&#1077;&#1088;&#1077;&#1076; &#1074;&#1099;&#1093;&#1086;&#1076;&#1086;&#1084; &#1079;&#1072;&#1082;&#1088;&#1099;&#1074;&#1072;&#1077;&#1084; &#1089;&#1086;&#1077;&#1076;&#1080;&#1085;&#1077;&#1085;&#1080;&#1077; &#1080; &#1087;&#1086;&#1090;&#1086;&#1082; QuikPy &#1080;&#1079; &#1083;&#1102;&#1073;&#1086;&#1075;&#1086; &#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088;&#1072;</div>
</body>
</html>
